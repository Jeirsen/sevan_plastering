<div class="row page-titles">
	<div class="col-md-5 col-8 align-self-center">
		<h3 class="text-themecolor">Sevan</h3>
		<ol class="breadcrumb">
	  	<li class="breadcrumb-item"><a href="<%= vendors_path %>">Vendors</a></li>
	    <li class="breadcrumb-item active"><%= @vendor.name %></li>
	  </ol>
	</div>
</div>

<div class="row">
	<div class="col-md-12 col-sm-12">
		<h2 class="text-info"><%= @vendor.name %></h2>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">State: </label> <%= @vendor.state %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">Address 1: </label> <%= @vendor.address1 %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">Zip Code: </label> <%= @vendor.zipcode %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">Address 2: </label> <%= @vendor.address2 %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">Phone: </label> <%= @vendor.phone %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">City: </label> <%= @vendor.city %>
	</div>
	<div class="col-md-4 col-sm-12">
		<label class="font-weight-bold">Fax: </label> <%= @vendor.fax %>
	</div>
	<div class="col-md-12 col-sm-12">
		<button onclick="editVendor()" type="button" class="btn btn-outline-info"><i class="fa fa-pencil"></i> Edit Vendor</button>
	</div>
</div>
<br>
<div class="row">
	<div class="col-md-12 col-sm-12">
		<h2 class="text-info">Vendor Emails</h2>
	</div>
	<% if !@vendor.vendor_emails.blank? %>
		<% @vendor.vendor_emails.each do |email| %>
			<div class="col-lg-4 col-md-6">
	    	<div class="card">
	        <div class="d-flex flex-row">
	          <div class="p-10 bg-info">
	             <h3 class="text-white box m-b-0">
	             <i class="ti-email"></i>
	            </h3>
	          </div>
	          <div class="align-self-center m-l-20">
	            <h6 class="text-muted m-b-0"><%= email.description %></h6>
	            <small class="m-b-0 text-info"><%= email.email %></small>
	            <h6 class="text-muted m-b-0"><%= email.name %></h6>
	          </div>
	        </div>
	      </div>
	    </div>
	  <% end %>
	<% else %>
		<div class="alert alert-info" style="width: 100%">
    	<button type="button" class="close" data-dismiss="alert" aria-label="Close">
    			<span aria-hidden="true">Ã—</span>
    	</button>
      <h3 class="text-info">
      	<i class="fa fa-exclamation-circle"></i> Information
     	</h3> 
     	There are no emails related to this vendor, please go and create some.
    </div>
	<% end %>
	<div class="col-md-12 col-sm-12">
		<button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#newVendorEmail">
			<i class="fa fa-plus"></i> Add New Email
		</button>
	</div>

</div>

<div class="modal fade" id="newVendorEmail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h4 class="modal-title" id="exampleModalLabel1">New Vendor Email</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
          	<form>
              <div class="form-group">
                  <label for="recipient-name" class="control-label">Name:</label>
                  <input type="text" class="form-control" id="vendor_email_name">
                  <span class="label label-danger" style="display: none" id="danger_name">Vendor email name is required!</span>
              </div>
              <div class="form-group">
                  <label for="recipient-name" class="control-label">Description:</label>
                  <input type="text" class="form-control" id="vendor_email_desc">
                  <span class="label label-danger" style="display: none" id="danger_desc">Vendor description is required!</span>
              </div>
              <div class="form-group">
                  <label for="recipient-name" class="control-label">Email:</label>
                  <input type="text" class="form-control" id="vendor_email">
                  <span class="label label-danger" style="display: none" id="danger_email"></span>
              </div>
          	</form>
            
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button onclick="addNewvendorEmail()" ontype="button" class="btn btn-danger waves-effect waves-light">Create</button>
          </div>
      </div>
  </div>
</div>


<script type="text/javascript">
    
function editVendor() {
  window.location.href = "<%= edit_vendor_path(@vendor.id) %>"
}

function addNewvendorEmail(){
	if (validateEmailData()){
		
	}else{

	}
}

function validateEmailData(){
	vendor_email_name = $.trim($("#vendor_email_name").val());
  vendor_email_desc = $.trim($("#vendor_email_desc").val());
  vendor_email = $.trim($("#vendor_email").val());
  error = false;

	if(vendor_email_name.length === 0)
	{ 
    $("#danger_name").show();
    setTimeout(function(){
        $('#danger_name').hide();
    },5000);
    error = true;
	}

	if(vendor_email_desc.length === 0)
	{ 
    $("#danger_desc").show();
    setTimeout(function(){
        $('#danger_desc').hide();
    },5000);
    error = true;
	}

	if(vendor_email.length === 0)
	{	
		$("#danger_email").text("Vendor Email is required!!");
	  $("#danger_email").show();
    setTimeout(function(){
      $("#danger_email").hide();
    },5000);
    error = true;
	}
	else
	{
    email_regex = new RegExp(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/)
    if (!email_regex.test(vendor_email)) {
    	$("#danger_email").text("Enter a valid email");
			$("#danger_email").show();
			setTimeout(function(){
				("#danger_email").hide();
			},5000);
			error = true; 
    }
	}

	return error;
}

</script>


